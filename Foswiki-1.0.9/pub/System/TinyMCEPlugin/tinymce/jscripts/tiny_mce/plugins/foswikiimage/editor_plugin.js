(function(){tinymce.PluginManager.requireLangPack('foswikiimage');tinymce.create('tinymce.plugins.FoswikiImage',{init:function(ed,url){ed.addCommand('foswikiimage',function(){ed.windowManager.open({location:false,menubar:false,toolbar:false,status:false,url:url+'/image.htm',width:550,height:400,movable:true,inline:true},{plugin_url:url,attach_url:FoswikiTiny.getFoswikiVar("PUBURL")+'/'
+FoswikiTiny.getFoswikiVar("WEB")+'/'
+FoswikiTiny.getFoswikiVar("TOPIC")+'/',vars:ed.getParam("foswiki_vars","")});});ed.addButton('image',{title:'foswikiimage.image_desc',cmd:'foswikiimage'});},getInfo:function(){return{longname:'Foswiki image',author:'Crawford Currie, from Moxiecode Systems AB original',authorurl:'http://c-dot.co.uk.com',infourl:'http://foswiki.org/Extensions/TinyMCEPlugin',version:tinyMCE.majorVersion+"."+tinyMCE.minorVersion};},_nodeChange:function(ed,cm,n,co){if(n==null)
return;cm.setActive('foswikiimage',ed.dom.getParent(n,'img')!=null);}});tinymce.PluginManager.add('foswikiimage',tinymce.plugins.FoswikiImage);})();